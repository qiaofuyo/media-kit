### FFmpeg 命令

**截取**

```powershell
ffmpeg -loglevel quiet -ss 00:00:00 -to 00:00:00 -i "荔枝甜心-快手直播.flv" -c copy "截取/荔枝甜心/1.mp4"

```

**生成预览图像**

```powershell
ffmpeg -loglevel quiet -i "紫嫣妹妹_2.flv" -vf "fps=1/60"  -q:v 31 "截取/紫嫣妹妹_ziyan666/previews_%03d.jpg"
```

###### 流复制转换视频格式

```powershell
ffmpeg -loglevel quiet -ss "${startTime}" -to "${endTime}" -i "${inputFile}" -c copy "${outputFile}"
```

**合并（参数相同）**

创建一个 mylist.txt，内容为：

```textile
file 'input1.flv'
file 'path/to/input2.mp4'
file 'another video.flv'
```

执行：

```powershell
ffmpeg -f concat -safe 0 -i mylist.txt -c copy "${outputFile}"
```

### M3U8 文件下载方法

**FFmpeg**

1. 设置代理环境变量（如果正在使用代理）

```powershell
$env:HTTP_PROXY="http://127.0.0.1:7897"
$env:HTTPS_PROXY="http://127.0.0.1:7897"
```

2. 执行 FFmpeg 下载视频命令

```powershell
ffmpeg -headers "Referer: https://x.com/\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" -i "https://prod-fastly-us-east-1.video.pscp.tv/Transcoding/v1/hls/oXxFQdSHdspfmwWZQMulVIey7qu6Ac8GQcac7o2nXGCBKD0laC9KGf8Ceq5WCOJULArDiuGboFtpUjdjFMXQ1Q/transcode/us-east-1/periscope-replay-direct-prod-us-east-1-public/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsInZlcnNpb24iOiIyIn0.eyJIZWlnaHQiOjEyODAsIkticHMiOjIwMDAsIldpZHRoIjo3MjB9.gL29fv4xZDHopwmIy-yEv58-V-it9p78iHCEZ9AAMTg/playlist_16687315821199139298.m3u8?type=replay" -c copy "D:\04_Temp\Downloads\twitter_甜甜(@baofuya)_20251003-0138_broadcasts-1vOxwdDRAjgKB.mp4"
```

3. (可选) 清除环境变量，以免影响后续操作

```powershell
Remove-Item Env:\HTTP_PROXY
Remove-Item Env:\HTTPS_PROXY
```

**yt-dlp**

1. Github 上下载 yt-dlp.exe 并和 ffmpeg.exe 放在同一个文件夹内，在这个文件夹内打开 PowerShell

2. 执行 yt-dlp 下载视频命令

```powershell
yt-dlp "https://prod-fastly-us-east-1.video.pscp.tv/Transcoding/v1/hls/oXxFQdSHdspfmwWZQMulVIey7qu6Ac8GQcac7o2nXGCBKD0laC9KGf8Ceq5WCOJULArDiuGboFtpUjdjFMXQ1Q/non_transcode/us-east-1/periscope-replay-direct-prod-us-east-1-public/master_dynamic_16687315821199139298.m3u8?type=replay" --referer "https://x.com/" -o "D:\04_Temp\Downloads\twitter_甜甜(@baofuya)_20251003-0138_broadcasts-1vOxwdDRAjgKB.%(ext)s" --no-check-certificate
```
